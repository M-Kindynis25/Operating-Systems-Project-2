# Lexan – Λεξικογραφική Ανάλυση με Ιεραρχία Διεργασιών

Το **Lexan** είναι μια εφαρμογή γραμμένη σε C/C++ που υλοποιεί λεξικογραφική ανάλυση ενός κειμένου με τη χρήση ιεραρχίας διεργασιών και επικοινωνίας μέσω pipes και named pipes (FIFOs). Το project δημιουργήθηκε στο πλαίσιο του μαθήματος "Λειτουργικά Συστήματα" του Τμήματος Πληροφορικής και Τηλεπικοινωνιών του Πανεπιστημίου Αθηνών.

---

## Περιγραφή

Η εφαρμογή διαβάζει ένα αρχείο κειμένου και εντοπίζει τις top-*k* πιο συχνές λέξεις, αφού πρώτα εξαιρέσει τις λέξεις που περιλαμβάνονται σε μια exclusion list. Η υλοποίηση βασίζεται στην αρχή του «διαίρει και κατέκτησε», όπου:
- **Root (lexan):** Είναι η κύρια διεργασία που αναλαμβάνει την ανάλυση ορισμάτων, τη δημιουργία των named pipes, την εκκίνηση των υπόλοιπων διεργασιών (splitters και builders) και την τελική συνένωση και εμφάνιση των αποτελεσμάτων.
- **Splitters:** Διαβάζουν τμήματα του αρχείου εισόδου, καθαρίζουν το κείμενο (αφαιρώντας σημεία στίξης, σύμβολα, ψηφία και λέξεις της exclusion list) και διαχωρίζουν το κείμενο σε λέξεις.
- **Builders:** Λαμβάνουν τις λέξεις από τους splitters (με ομοιόμορφη κατανομή βάσει συνάρτησης κατακερματισμού), τις μετρούν και αποστέλλουν τις top-*k* λέξεις πίσω στον root.

Οι διεργασίες επικοινωνούν μεταξύ τους χρησιμοποιώντας:
- **Pipes/Named Pipes (FIFOs):** Για τη μεταφορά δεδομένων (λέξεις και αποτελέσματα).
- **Σήματα (USR1 και USR2):** Για την ειδοποίηση ολοκλήρωσης της εργασίας από τους splitters και τους builders αντίστοιχα.
- **Μέτρηση Χρόνου:** Για καταγραφή τόσο του πραγματικού όσο και του CPU χρόνου εκτέλεσης κάθε διεργασίας.


---

## Προαπαιτούμενα

- **Λειτουργικό Σύστημα:** Linux (η εφαρμογή έχει σχεδιαστεί για Linux workstations του τμήματος).
- **Compiler:** g++ (με υποστήριξη C++11).
- **Γνώσεις:** Βασική κατανόηση κλήσεων συστήματος (fork, exec, pipe, mkfifo, read, write, wait, κ.α.) και διαχείρισης διεργασιών.

---

## Οδηγίες Εγκατάστασης και Εκτέλεσης

### 1. Clone το Repository

```bash
git clone https://github.com/yourusername/lexan.git
cd lexan
```

### 2. Compilation
Για να κάνετε compile το project, τρέξτε στο τερματικό:
```bash
make
```
Αυτό θα δημιουργήσει τα εκτελέσιμα:
- `lexan`
- `builder`
- `splitter`

### 3. Εκτέλεση της Εφαρμογής
Η εφαρμογή lexan δέχεται τα εξής ορίσματα στη γραμμή εντολών:
```bash
./lexan -i TextFile -l numOfSplitter -m numOfBuilders -t TopPopular -e ExclusionList -o OutputFile
```
#### Παράδειγμα:
```bash
./lexan -i inputfile.txt -l 10 -m 7 -t 10 -e ExclusionList1.txt -o results.txt
```
#### Επεξήγηση Ορισμάτων:
- `-i TextFile`: Το αρχείο εισόδου (κείμενο σε μορφή ASCII).
- `-l numOfSplitter`: Ο αριθμός των διεργασιών splitter που θα δημιουργηθούν.
- `-m numOfBuilders`: Ο αριθμός των διεργασιών builder που θα δημιουργηθούν.
- `-t TopPopular`: Ο αριθμός των πιο συχνών λέξεων που θα εμφανιστούν.
- `-e ExclusionList`: Το αρχείο εξαιρέσεων που περιέχει λέξεις για παράβλεψη.
- `-o OutputFile`: Το αρχείο εξόδου στο οποίο θα αποθηκευτούν τα αποτελέσματα.

### 4. Εκτέλεση με Valgrind
Για να ελέγξετε για διαρροές μνήμης, τρέξτε:
```bash
make valgrind
```

### 5. Καθαρισμός Παραγόμενων Αρχείων
Για να διαγράψετε τα εκτελέσιμα και τα αντικείμενα που δημιουργήθηκαν:
```bash
make clean
```

---

## Λεπτομερής Περιγραφή Κώδικα

### Root (lexan)
- **Αρχικοποίηση:** Ανάλυση παραμέτρων γραμμής εντολών και δημιουργία δομών για επικοινωνία.
- **Δημιουργία Named Pipes:** Δημιουργεί τα απαραίτητα named pipes για επικοινωνία μεταξύ splitters και builders.
- **Δημιουργία Διεργασιών:** Χρησιμοποιεί `fork()` για δημιουργία διεργασιών και `execl()` για την εκτέλεση των αντίστοιχων προγραμμάτων.
- **Συγκέντρωση και Συνδυασμός Αποτελεσμάτων:** Περιμένει τα σήματα ολοκλήρωσης από splitters (`USR1`) και builders (`USR2`) και συλλέγει τα αποτελέσματα.

### Splitter
- **Ανάγνωση Κειμένου:** Ανοίγει το αρχείο εισόδου και επεξεργάζεται μόνο τις γραμμές εντός ενός συγκεκριμένου εύρους.
- **Καθαρισμός Λέξεων:** Χρησιμοποιεί τη συνάρτηση `cleanWord` για αφαίρεση σημείων στίξης, ψηφίων και λέξεων από την exclusion list.
- **Κατανομή σε Builders:** Με βάση μια συνάρτηση κατακερματισμού (`hashFunction`), στέλνει κάθε λέξη στον κατάλληλο builder μέσω named pipe.

### Builder
- **Λήψη και Επεξεργασία Λέξεων:** Διαβάζει τις λέξεις από τους splitters και καταμετρά την εμφάνιση κάθε λέξης.
- **Ταξινόμηση και Επιλογή:** Ταξινομεί τις λέξεις βάσει της συχνότητας εμφάνισης και επιλέγει τις top-k λέξεις.
- **Επιστροφή Αποτελεσμάτων:** Στέλνει τα αποτελέσματα πίσω στον root μαζί με μετρήσεις χρόνου εκτέλεσης.

### Δομές Δεδομένων
- **Vector & List:** Χρησιμοποιούνται για την αποθήκευση δεδομένων (λέξεις, counters, χρόνοι) χωρίς στατικό περιορισμό στο μέγεθος.

